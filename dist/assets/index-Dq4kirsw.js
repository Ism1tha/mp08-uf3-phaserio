import{p as e}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/menu/bg.png")}create(){this.scene.start("Preloader")}}class s extends e.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class i extends e.Scene{constructor(){super("MainMenu")}preload(){this.scene.get("Game").preload()}create(){this.add.image(512,384,"background"),this.add.image(512,300,"logo");const e=this.add.text(512,460,"Press click to play!",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);this.input.once("pointerdown",(()=>{this.scene.start("Game")}));let t=this.scene.get("Game").data.get("record")||0;this.add.text(512,600,"High Score: "+t,{fontFamily:"Arial Black",fontSize:28,color:"#ffffff",stroke:"#000000",strokeThickness:4,align:"center"}).setOrigin(.5),this.tweens.add({targets:e,y:500,duration:1e3,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}}class o extends e.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","/menu/logo.png")}create(){this.scene.start("MainMenu")}}class a extends e.Scene{constructor(){super("Game"),this.record=0}preload(){this.load.image("island_png","assets/game/map/island_24x24.png"),this.load.tilemapTiledJSON("island","assets/game/map/island.json"),this.load.image("bullet","assets/game/other/fireball.png"),this.load.image("health","assets/game/other/life.png"),this.load.image("powerup","assets/game/other/powerup.png"),this.load.image("triple_shot","assets/game/other/powerup_2.png"),this.load.image("360_shooting","assets/game/other/powerup_3.png"),this.load.image("enemy","assets/game/characters/skeleton.png"),this.load.image("player","assets/game/characters/mage.png"),this.load.audio("backgroundMusic","assets/music/game.mp3"),this.load.audio("attackSound","assets/game/sounds/attack.mp3"),this.load.audio("damageSound","assets/game/sounds/damage.mp3")}create(){this.score=0,this.livesCount=3,this.enemySpawnInterval=2e3,this.lastEnemySpawnTime=0,this.enemySpeed=100,this.isInvincible=!1,this.isTripleShotActive=!1,this.isShooting360Active=!1,this.record=this.data.get("record")||0,this.backgroundMusic=this.sound.add("backgroundMusic",{loop:!0}),this.backgroundMusic.play(),this.attackSound=this.sound.add("attackSound"),this.damageSound=this.sound.add("damageSound");const e=this.make.tilemap({key:"island"}),t=e.addTilesetImage("island_24x24","island_png");var s=e.createLayer("Survival Island",t,0,0);s.setCollisionByProperty({colision:!0}),this.player=this.physics.add.sprite(100,450,"player"),this.player.setScale(.5),this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#000"}),this.livesText=this.add.text(16,50,"Lives: "+this.livesCount,{fontSize:"32px",fill:"#000"}),this.cursors=this.input.keyboard.createCursorKeys(),this.input.on("pointerdown",this.shootBullet,this),this.bullets=this.physics.add.group(),this.enemies=this.physics.add.group(),this.healthItems=this.physics.add.group(),this.powerups=this.physics.add.group(),this.tripleShotPowerups=this.physics.add.group(),this.shooting360Powerups=this.physics.add.group(),this.physics.add.collider(this.player,s),this.physics.add.collider(this.bullets,this.enemies,this.hitEnemy,null,this),this.physics.add.collider(this.player,this.enemies,this.enemyCollision,null,this),this.physics.add.overlap(this.player,this.healthItems,this.collectHealth,null,this),this.physics.add.overlap(this.player,this.powerups,this.collectPowerup,null,this),this.physics.add.overlap(this.player,this.tripleShotPowerups,this.collectTripleShotPowerup,null,this),this.physics.add.overlap(this.player,this.shooting360Powerups,this.collectShooting360Powerup,null,this)}update(e,t){this.cursors.left.isDown?this.player.setVelocityX(-250):this.cursors.right.isDown?this.player.setVelocityX(250):this.player.setVelocityX(0),this.cursors.up.isDown?this.player.setVelocityY(-250):this.cursors.down.isDown?this.player.setVelocityY(160):this.player.setVelocityY(0),e>this.lastEnemySpawnTime+this.enemySpawnInterval&&(this.spawnEnemy(),this.lastEnemySpawnTime=e,this.enemySpawnInterval>500&&(this.enemySpawnInterval-=100),this.enemySpeed+=5),this.enemies.getChildren().forEach((e=>{this.physics.moveToObject(e,this.player,this.enemySpeed)}))}shootBullet(e){this.attackSound.play();const t=this.bullets.create(this.player.x,this.player.y,"bullet");this.physics.moveTo(t,e.x,e.y,300);const s=Phaser.Math.Angle.Between(t.x,t.y,e.x,e.y);t.rotation=Phaser.Math.RadToDeg(s),this.tweens.add({targets:t,rotation:t.rotation+Phaser.Math.PI2,duration:1e3,ease:"Linear",repeat:-1})}shoot360Bullet(e){const t=2*Math.PI/36;for(let s=0;s<36;s++){const i=s*t,o=this.bullets.create(this.player.x,this.player.y,"bullet");this.physics.moveTo(o,e.x+100*Math.cos(i),e.y+100*Math.sin(i),300)}}spawnEnemy(){let e,t;const s=this.player.x,i=this.player.y;do{e=Phaser.Math.Between(0,this.game.config.width),t=Phaser.Math.Between(0,this.game.config.height)}while(Phaser.Math.Distance.Between(s,i,e,t)<250);const o=this.enemies.create(e,t,"enemy");o.setScale(3),o.setCollideWorldBounds(!0)}hitEnemy(e,t){e.destroy(),t.destroy(),this.score+=10,this.scoreText.setText("Score: "+this.score),this.data.set("score",this.score);const s=Phaser.Math.Between(0,500);if(s<10){const e=this.healthItems.create(t.x,t.y,"health");e.setScale(.5),e.setCollideWorldBounds(!0)}else if(s<20){const e=this.powerups.create(t.x,t.y,"powerup");e.setScale(.5),e.setCollideWorldBounds(!0)}else if(s<30){const e=this.tripleShotPowerups.create(t.x,t.y,"triple_shot");e.setScale(.5),e.setCollideWorldBounds(!0)}else if(s<40){const e=this.shooting360Powerups.create(t.x,t.y,"360_shooting");e.setScale(.5),e.setCollideWorldBounds(!0)}}enemyCollision(e,t){if(this.isInvincible)t.destroy();else if(this.physics.pause(),e.setTint(16711680),this.livesCount-=1,this.damageSound.play(),this.livesText.setText("Lives: "+this.livesCount),this.data.set("lives",this.livesCount),t.destroy(),this.livesCount<=0){this.backgroundMusic.stop();const e=this.data.get("record")||0;this.score>e&&this.data.set("record",this.score),this.score>e?this.scene.start("GameComplete"):this.scene.start("GameOver")}else this.time.delayedCall(1e3,(()=>{this.physics.resume(),e.clearTint()}))}collectHealth(e,t){t.destroy(),this.livesCount+=1,this.livesText.setText("Lives: "+this.livesCount),this.data.set("lives",this.livesCount)}collectPowerup(e,t){t.destroy(),this.isInvincible=!0,e.setTint(65280),this.time.delayedCall(1e4,(()=>{this.isInvincible=!1,e.clearTint()}))}collectTripleShotPowerup(e,t){t.destroy(),this.isTripleShotActive=!0,e.setTint(255),this.time.delayedCall(1e4,(()=>{this.isTripleShotActive=!1,e.clearTint()}))}collectShooting360Powerup(e,t){t.destroy(),this.isShooting360Active=!0,e.setTint(16711935),this.time.delayedCall(1e4,(()=>{this.isShooting360Active=!1,e.clearTint()}))}}class r extends e.Scene{constructor(){super("GameComplete")}preload(){this.load.audio("recordSound","assets/game/sounds/record.mp3")}create(){this.add.image(512,384,"background"),this.record_sound=this.sound.add("recordSound"),this.record_sound.play(),this.add.text(512,-200,"New Record!",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);const e=this.scene.get("Game").data.get("score")||0;this.add.text(512,400,"New Score: "+e,{fontFamily:"Arial Black",fontSize:48,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}const n={type:Phaser.AUTO,width:1004,height:768,parent:"game-container",backgroundColor:"#00000",physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[t,o,i,a,r,s],debug:!0};new Phaser.Game(n);
